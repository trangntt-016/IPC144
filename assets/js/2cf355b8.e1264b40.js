"use strict";(self.webpackChunkipc144=self.webpackChunkipc144||[]).push([[768],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||r;return n?i.createElement(h,l(l({ref:t},p),{},{components:n})):i.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var c=2;c<r;c++)l[c]=n[c];return i.createElement.apply(null,l)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},1348:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return p},default:function(){return d}});var i=n(7462),a=n(3366),r=(n(7294),n(3905)),l=["components"],o={sidebar_position:7},s="Portability",c={unversionedId:"F-Refinements/portability",id:"F-Refinements/portability",isDocsHomePage:!1,title:"Portability",description:"Learning Outcomes",source:"@site/docs/F-Refinements/portability.md",sourceDirName:"F-Refinements",slug:"/F-Refinements/portability",permalink:"/F-Refinements/portability",editUrl:"https://github.com/Seneca-ICTOER/IPC144/tree/main/docs/F-Refinements/portability.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"courseNotesSidebar",previous:{title:"Algorithms",permalink:"/refinements/algorithms"},next:{title:"ASCII Collating Sequence",permalink:"/Resources-Appendices/ascii-collating-sequence"}},p=[{value:"Learning Outcomes",id:"learning-outcomes",children:[],level:2},{value:"Introduction",id:"introduction",children:[],level:2},{value:"The C Standards",id:"the-c-standards",children:[{value:"C89",id:"c89",children:[],level:3},{value:"C99",id:"c99",children:[],level:3},{value:"C11",id:"c11",children:[],level:3}],level:2},{value:"Structured Programs",id:"structured-programs",children:[],level:2},{value:"Static Analysis (Optional)",id:"static-analysis-optional",children:[{value:"Lint Checking",id:"lint-checking",children:[],level:3},{value:"Documentation",id:"documentation",children:[],level:3}],level:2},{value:"Guidelines (Optional)",id:"guidelines-optional",children:[],level:2}],u={toc:p};function d(e){var t=e.components,n=(0,a.Z)(e,l);return(0,r.kt)("wrapper",(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"portability"},"Portability"),(0,r.kt)("h2",{id:"learning-outcomes"},"Learning Outcomes"),(0,r.kt)("p",null,"After reading this section, you will be able to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Explain procedural programming using nontechnical terminology to inform a business person")),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Mature languages attract international standards.  These standards promote uniformity across host platforms.  Committees of compiler writers, academics, applications developers and representatives from various national organizations review, discuss, negotiate and reach consensus on which elements should be included in the standard definition.  Elements that are excluded are called extensions.  Compiler writers include their ",(0,r.kt)("em",{parentName:"p"},"extensions")," in their own implementations of the agreed standard. "),(0,r.kt)("p",null,"A standard definition enables developers to write programs with the expectation that they will compile and run on a wide variety of platforms that support the standard.  By avoiding the use of extensions, we increase the portability of our software.  We call standard-compliant software ",(0,r.kt)("em",{parentName:"p"},"highly")," portable. "),(0,r.kt)("p",null,"This chapter reviews the C standards that have been defined throughout the language's history, introduces some coding guidelines and describes utilities available for analyzing the degree of portability."),(0,r.kt)("h2",{id:"the-c-standards"},"The C Standards"),(0,r.kt)("p",null,'Dennis Ritchie created the C language between 1969 and 1973, while working at AT&T Bell Labs.  Brian Kernighan and Dennis Ritchie published their original description of the language in the classic book entitled "The C Programming Language" in 1978.  They published a second edition in 1988. '),(0,r.kt)("p",null,"Since then, the C language has undergone three 'standard' definitions: one in 1989, one in 1999 and the latest in 2011. "),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://ict.senecacollege.ca//~ipc144/pages/images/standards.png",alt:null})),(0,r.kt)("h3",{id:"c89"},"C89"),(0,r.kt)("p",null,"In 1982, the American National Standards Institute formed committee X3J11 to propose the first standard for C.  An international group converted this standard with minor modifications into the ISO/IEC 9899:1990 standard, which ANSI subsequently adopted.  This was called Standard C to distinguish it from Kernighan and Ritchie C (K & R C, in short)."),(0,r.kt)("p",null,"Standard C introduced:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"function prototypes"),(0,r.kt)("li",{parentName:"ul"},"a standard library"),(0,r.kt)("li",{parentName:"ul"},"whitespace before #"),(0,r.kt)("li",{parentName:"ul"},"new keywords")),(0,r.kt)("p",null,"In 1995, ANSI introduced some amendments to Standard C, called C95, which included new conversion specifiers for ",(0,r.kt)("inlineCode",{parentName:"p"},"printf()")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"scanf()")," and more library functions."),(0,r.kt)("h3",{id:"c99"},"C99"),(0,r.kt)("p",null,"ISO/IEC approved the second international standard in 1999: ISO/IEC 9899:1999 (C99). "),(0,r.kt)("p",null,"C99 introduced:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"long long data type"),(0,r.kt)("li",{parentName:"ul"},"_Bool data type"),(0,r.kt)("li",{parentName:"ul"},"_Complex data type"),(0,r.kt)("li",{parentName:"ul"},"complex arithmetic"),(0,r.kt)("li",{parentName:"ul"},"variable-length arrays"),(0,r.kt)("li",{parentName:"ul"},"// C++ style comments"),(0,r.kt)("li",{parentName:"ul"},"better support for floating-point types, including math functions for all types")),(0,r.kt)("h3",{id:"c11"},"C11"),(0,r.kt)("p",null,"ISO/IEC approved the third international standard in 2011: ISO/IEC 9899:2011 (C11). "),(0,r.kt)("p",null,"C11 introduced:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"multithreading support"),(0,r.kt)("li",{parentName:"ul"},"improved Unicode support"),(0,r.kt)("li",{parentName:"ul"},"bounds checking interfaces"),(0,r.kt)("li",{parentName:"ul"},'a create and open mode ("x") for fopen()'),(0,r.kt)("li",{parentName:"ul"},"removal of gets()"),(0,r.kt)("li",{parentName:"ul"},"optional support for complex arithmetic"),(0,r.kt)("li",{parentName:"ul"},"optional support for variable-length arrays")),(0,r.kt)("p",null,"The optional support applies to features that had been mandatory under the C99 standard. "),(0,r.kt)("h2",{id:"structured-programs"},"Structured Programs"),(0,r.kt)("p",null,"Software engineers have advocated certain paradigms for developing software.  The ",(0,r.kt)("em",{parentName:"p"},"Structured Programming")," paradigm achieves clarity by distinguishing high-level coding techniques from low-level assembly language coding techniques.  The principles of this paradigm apply to coding in many languages, including C.  They may be summarized as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"a structured program consists solely of three constructs: sequences, selections, and iterations"),(0,r.kt)("li",{parentName:"ul"},"each structured construct exhibits a single entry point and a single exit point"),(0,r.kt)("li",{parentName:"ul"},"statements that jump outside a construct are not allowed with certain exceptions (",(0,r.kt)("inlineCode",{parentName:"li"},"switch case")," constructs in the C language)")),(0,r.kt)("p",null,"The following style points highlight structured properties of program code:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"indent and align code to reveal the structure of the logic"),(0,r.kt)("li",{parentName:"ul"},"indent the code consistently within a structured construct"),(0,r.kt)("li",{parentName:"ul"},"separate constructs by blank lines to improve clarity")),(0,r.kt)("h2",{id:"static-analysis-optional"},"Static Analysis (Optional)"),(0,r.kt)("p",null,"Static analysis of a program can reveal code that might not be portable.  Tools for static analysis flag suspicious code.  Some popular tools for C language programs include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"lint - the original analyzer written by Stephen Johnson in 1979"),(0,r.kt)("li",{parentName:"ul"},"Parasoft C/C++ test - plugins for Visual Studio and Eclipse IDEs"),(0,r.kt)("li",{parentName:"ul"},"Splint - a modern open source version of lint")),(0,r.kt)("h3",{id:"lint-checking"},"Lint Checking"),(0,r.kt)("p",null,"Consider the following program:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'// Lint Checking\n// lint.c\n\n#include <stdio.h>\n\nint main(void)\n{\n        char c;\n\n        c = getchar();\n\n        if (c == EOF)\n                printf("End of data\\n");\n        else\n                printf("You entered %c\\n", c); \n\n        return 0;\n}\n')),(0,r.kt)("p",null,"Under normal settings, the ",(0,r.kt)("inlineCode",{parentName:"p"},"gcc")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cl"),' compilers will not issue any warning or error messages.  If this program compiles under either of these compilers and the user enters the "end of data" key-combination, the output will be:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"End of data\n")),(0,r.kt)("p",null,'If this program compiles under an AIX compiler and the user enters "end of data" key-combination, the output will be:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"You entered \xff\n")),(0,r.kt)("p",null,"AIX compilers store char with a range of 0 to 255, while ",(0,r.kt)("inlineCode",{parentName:"p"},"gcc")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"cl")," store char with a range -127 to 127.  To resolve the ambiguity, we declare c as int."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-c"},'// Lint Checking\n// lint.c\n\n#include <stdio.h>\n\nint main(void)\n{\n        int c;  // store character as an int\n\n        c = getchar();\n\n        if (c == EOF)\n                printf("End of data\\n");\n        else\n                printf("You entered %c\\n", c); \n\n        return 0;\n}\n')),(0,r.kt)("p",null,"To identify this portability issue on an AIX platform, we can pass the source code through the lint code checker:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lint lint.c\n")),(0,r.kt)("p",null,"Example message from lint:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"lint.c", line 13: warning: comparison of unsigned with negative constant \n')),(0,r.kt)("p",null,"To identify this portability issue on a ",(0,r.kt)("inlineCode",{parentName:"p"},"cl")," platform, we change the compiler warning level options to ",(0,r.kt)("inlineCode",{parentName:"p"},"/W4")," (warning level 4) and ",(0,r.kt)("inlineCode",{parentName:"p"},"/WX")," (treat all warnings as errors)."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note",(0,r.kt)("br",null),"\nYou can set these attributes in the Visual Studio project properties")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"cl lint.c /W4 /WX\n")),(0,r.kt)("p",null,"Example message from lint:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"lint.c(11) : error C2220: warning treated as error - no object file generated\nlint.c(11) : warning C4244: '=' : conversion from 'int' to 'char', possible loss of data\n")),(0,r.kt)("h3",{id:"documentation"},"Documentation"),(0,r.kt)("p",null,"You can find documentation on lint code checkers at"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://www.unix.com/man-page/FreeBSD/1/lint"},"Lint")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://lclint.cs.virginia.edu/"},"LCLint/Splint"))),(0,r.kt)("h2",{id:"guidelines-optional"},"Guidelines (Optional)"),(0,r.kt)("p",null,"Many organizations establish their own guidelines for maintaining consistency and continuity throughout the life cycle of the applications written by several developers.  Guidelines differ from standards in the scope of their applicability: they are less prescriptive than standards. "),(0,r.kt)("p",null,"Examples of institutional guidelines include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://gcc.gnu.org/codingconventions.html#CandCxx"},"GCC Coding Conventions")," - guidelines for C code in the GNU project"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://en.wikipedia.org/wiki/Debian_Free_Software_Guidelines"},"Debian")," - guidelines for inclusion in the Debian project"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"http://users.ece.cmu.edu/~eno/coding/CCodingStandard.html"},"Carnegie Mellon University")," - Electrical and Computer Engineering"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.misra.org.uk/product/misra-c2012-third-edition-first-revision/"},"MISRA C 2012")," - guideline for use of the C language in critical systems")),(0,r.kt)("p",null,"Examples of common features in these guidelines include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"#include"),"s should follow the header comments"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"#define"),"s should follow the ",(0,r.kt)("inlineCode",{parentName:"li"},"#include"),"s"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"#define")," constants should be in all ",(0,r.kt)("strong",{parentName:"li"},"CAPS")),(0,r.kt)("li",{parentName:"ul"},"avoid names that differ in case only"),(0,r.kt)("li",{parentName:"ul"},"avoid names that look like each other"),(0,r.kt)("li",{parentName:"ul"},"constants should be of the same data type as the variables that the constants initialize"),(0,r.kt)("li",{parentName:"ul"},"avoid declarations that shadow declarations at a higher level"),(0,r.kt)("li",{parentName:"ul"},"avoid assuming the ASCII collating sequence"),(0,r.kt)("li",{parentName:"ul"},"split compound conditions into one simple condition per line"),(0,r.kt)("li",{parentName:"ul"},"avoid defaulting a test condition to non-zero"),(0,r.kt)("li",{parentName:"ul"},"compare to FALSE rather than TRUE"),(0,r.kt)("li",{parentName:"ul"},"comment each fall through in a ",(0,r.kt)("inlineCode",{parentName:"li"},"switch case:")),(0,r.kt)("li",{parentName:"ul"},"attach unary operators to their operand without spaces"),(0,r.kt)("li",{parentName:"ul"},"compare a pointer to ",(0,r.kt)("inlineCode",{parentName:"li"},"NULL")," instead of to 0"),(0,r.kt)("li",{parentName:"ul"},"avoid assumptions about parameter passing and the order of their evaluation"),(0,r.kt)("li",{parentName:"ul"},"avoid possible side effects such as ",(0,r.kt)("inlineCode",{parentName:"li"},"a[i] = b[i++];"))))}d.isMDXComponent=!0}}]);